<template>
    <v-container fluid style="padding: 0;" no-gutters>
        <v-col class="mx-0 my-0">
            <v-row no-gutters>
                <v-col cols="1" class="pt-1 logo" align="center">
                    <svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#"
                        xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg"
                        xmlns="http://www.w3.org/2000/svg"
                        xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
                        xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="80" height="70"
                        viewBox="0 0 74.999997 73.5" version="1.1" id="svg12" sodipodi:docname="SENA logo.svg"
                        inkscape:version="0.92.4 (5da689c313, 2019-01-14)">
                        <title id="title222">SENA Colombia logo</title>
                        <path :fill="color"
                            d="M 37.729312,0.76709211 A 7.9671225,7.9671225 0 0 0 29.773371,8.741545 7.9671225,7.9671225 0 0 0 37.744605,16.701107 7.9671225,7.9671225 0 0 0 45.707788,8.733898 V 8.718608 A 7.9671225,7.9671225 0 0 0 37.729312,0.76709211 Z M 11.446982,19.169553 c -1.400062,0.0084 -2.8234862,0.08599 -4.1584857,0.42261 -0.8795905,0.222694 -1.7315449,0.589234 -2.2841086,1.159562 -0.6939573,0.71469 -0.7830516,1.683375 -0.4447463,2.510708 0.3027378,0.728932 1.116412,1.275934 2.0228936,1.588612 1.9500175,0.668079 4.117455,0.809612 6.168096,1.230399 0.378207,0.09257 0.796556,0.194498 1.030766,0.452796 0.242885,0.306852 0.09871,0.729986 -0.299446,0.922901 -0.666204,0.338572 -1.517067,0.341289 -2.29256,0.329636 -0.708709,-0.02913 -1.4860247,-0.08878 -2.0498634,-0.44354 -0.4146382,-0.255061 -0.487253,-0.689278 -0.3944343,-1.062161 l -4.5714374,4.13e-4 c -0.012144,0.695917 0.1230528,1.422157 0.6331108,2.019674 0.4259168,0.510124 1.1138561,0.869443 1.8546552,1.08631 1.1823274,0.347635 2.4633397,0.45247 3.7246061,0.484191 1.711468,0.02913 3.456086,-0.02172 5.099895,-0.410133 0.979349,-0.238231 1.942311,-0.624278 2.569473,-1.250927 1.113798,-1.117998 0.851643,-2.888599 -0.629086,-3.758011 -0.737329,-0.429203 -1.620362,-0.695805 -2.52077,-0.867357 -1.316781,-0.273188 -2.657724,-0.472977 -3.991855,-0.693081 -0.468421,-0.09127 -0.9637641,-0.17183 -1.3575867,-0.393229 -0.4120347,-0.221399 -0.4451988,-0.742521 -0.025355,-0.970393 0.5430207,-0.306203 1.2665147,-0.304035 1.9162377,-0.304681 0.68528,0.01165 1.430476,0.05483 1.994315,0.375921 0.31575,0.17673 0.442485,0.473443 0.445955,0.758283 l 4.344837,-0.01004 c -0.01734,-0.550925 -0.118731,-1.123123 -0.521227,-1.598289 -0.466686,-0.585218 -1.287477,-0.954052 -2.13237,-1.169625 -1.325457,-0.335334 -2.741002,-0.404061 -4.131515,-0.410535 z m 9.425817,0.328831 -0.0019,10.38132 12.670256,4.12e-4 -0.0011,-2.263178 H 25.518157 V 25.60169 h 7.154592 v -2.212465 h -7.154592 l -0.0016,-1.652607 7.734167,-0.002 -0.0044,-2.236213 z m 20.874932,0.0036 c 0,0 -3.91491,0.0012 -5.871868,0.0012 l -8.25e-4,10.382125 4.448274,4.12e-4 -0.0028,-6.986351 6.093235,6.980716 6.104905,0.0056 -0.0016,-10.382527 -4.451897,7.97e-4 0.0052,6.936443 z m 18.702713,0.01731 c 0,0 -4.795135,6.925757 -7.204899,10.383332 l 4.669239,4.12e-4 1.120118,-1.873169 h 7.21456 l 1.045256,1.873974 5.186434,-7.96e-4 -6.872848,-10.382125 z m 2.333214,2.478105 2.214074,3.76083 -4.576669,0.0065 z m -62.26819489,10.81881 0.0402459,5.651707 21.11883799,-0.07527 c 1.07706,0.231841 1.7024,0.932964 1.482355,2.526807 l -12.989427,22.73807 4.231335,3.955631 20.118662,-34.796918 z m 40.29930289,0.0483 19.784196,34.649208 4.372205,-3.930275 -13.14036,-22.678472 c -0.22011,-1.598763 0.405444,-2.307963 1.482759,-2.540491 l 21.123264,0.07527 -0.0056,-5.557928 z m -3.337814,5.733814 -18.552992,31.845491 4.928038,2.401635 12.380065,-20.924035 c 0.426522,-0.348923 0.858497,-0.534847 1.290772,-0.552212 0.455325,-0.01744 0.916655,0.151004 1.377709,0.511558 l 12.351487,20.988033 5.083398,-2.65158 z"
                            id="path47-5" inkscape:connector-curvature="0" />
                        <g id="#000000ff-2" transform="matrix(0.31570611,0,0,0.23560774,-391.49698,-10.601126)"
                            style="fill:#ff6719;fill-opacity:1" />
                    </svg>
                </v-col>
                <v-col cols="11" class="mx-0 my-0 py-0 px-0">
                    <v-row style="border: 1px solid black; margin: 0 0; justify-content: center;">
                        <h6>RECEPCIÓN MUESTRAS</h6>
                    </v-row>
                    <v-row class="centro">
                        <h6>
                            CENTRO AGROTURÍSTICO – SAN GIL, SANTANDER <br />
                            LABORATORIO LABFICAT
                        </h6>
                    </v-row>
                    <v-row class="mx-0 my-0 px-0 py-0" style="border: 1px solid black">
                        <v-col cols="5" class="justificar px-0 py-0 formato">
                            <h6 class="justificar">
                                CÓDIGO <br />
                                {{ formato[0].codigo }}
                            </h6>
                        </v-col>
                        <v-col cols="5 px-0 py-0">
                            <h6 class="justificar formato">
                                APROBACIÓN <br />
                                {{ formato[0].aprobacion }}
                            </h6>
                        </v-col>
                        <v-col cols="2 px-0 py-0">
                            <h6 class="justificar">
                                VERSIÓN: <br />
                                {{ formato[0].version }}
                            </h6>
                        </v-col>
                    </v-row>
                </v-col>
            </v-row>
            <v-row no-gutters class="solicitante">
                <h5 class="primary text-center white--text" style="width: 100%">
                    Datos del solicitante
                </h5>
            </v-row>
            <v-row no-gutters>
                <v-col cols="6" class="py-0 px-0">
                    <v-row>
                        <v-col cols="4" class="text-center pr-0">
                            <p :style="{ background: color, color: 'white', borderRight: 'solid 1px black', borderLeft: 'solid 1px black' }"
                                class=" mb-0 py-2">Solicitante</p>
                            <p :style="{ background: color, color: 'white' }" class=" mb-0 prueba py-2">NIT/C.C.</p>
                            <p :style="{ background: color, color: 'white' }" class=" mb-0 prueba py-2">Dirección</p>
                            <p :style="{ background: color, color: 'white' }" class=" mb-0 prueba py-2">Ciudad</p>
                        </v-col>
                        <v-col cols="8" class="pl-0">
                            <p :style="{ color: 'black' }" class=" mb-0 pl-2 py-2">{{ person.nombre }}</p>
                            <p :style="{ color: 'black', borderTop: 'solid 1px black', borderRight: 'solid 1px black' }"
                                class=" mb-0 pl-2 py-2">{{ person.cc }}</p>
                            <p :style="{ color: 'black', borderTop: 'solid 1px black', borderRight: 'solid 1px black' }"
                                class=" mb-0 pl-2 py-2">{{ person.direccion }}</p>
                            <p :style="{ color: 'black', borderTop: 'solid 1px black', borderRight: 'solid 1px black' }"
                                class=" mb-0 pl-2 py-2">{{ person.ciudad }}</p>
                        </v-col>
                    </v-row>
                </v-col>
                <v-col cols="6" class="py-0 px-0">
                    <v-row>
                        <v-col cols="4" class="text-center px-0">
                            <p :style="{ background: color, color: 'white', borderRight: 'solid 1px black', borderLeft: 'solid 1px black' }"
                                class="mb-0 py-2">Departamento</p>
                            <p :style="{ background: color, color: 'white', borderTop: 'solid 1px black', borderRight: 'solid 1px black', borderLeft: 'solid 1px black' }"
                                class="mb-0 py-2">Contacto</p>
                            <p :style="{ background: color, color: 'white', borderTop: 'solid 1px black', borderRight: 'solid 1px black', borderLeft: 'solid 1px black' }"
                                class="mb-0 py-2">Teléfono</p>
                            <p :style="{ background: color, color: 'white', borderTop: 'solid 1px black', borderRight: 'solid 1px black', borderLeft: 'solid 1px black' }"
                                class="mb-0 py-2">Correo Electrónico</p>
                        </v-col>
                        <v-col cols="8" class="pl-0">
                            <p :style="{ color: 'black', borderRight: 'solid 1px black', }" class=" mb-0 pl-2 py-2">{{
                                    person.nombre
                            }}</p>
                            <p :style="{ color: 'black', borderTop: 'solid 1px black', borderRight: 'solid 1px black' }"
                                class=" mb-0 pl-2 py-2">{{ person.cc }}</p>
                            <p :style="{ color: 'black', borderTop: 'solid 1px black', borderRight: 'solid 1px black' }"
                                class=" mb-0 pl-2 py-2">{{ person.direccion }}</p>
                            <p :style="{ color: 'black', borderTop: 'solid 1px black', borderRight: 'solid 1px black' }"
                                class=" mb-0 pl-2 py-2">{{ person.ciudad }}</p>
                        </v-col>
                    </v-row>
                </v-col>
            </v-row>
            <v-row no-gutters style="border: 1px solid black">
                <h5 class="primary text-center white--text" style="width: 100%">
                    Datos de la Muestra
                </h5>
            </v-row>
            <v-row no-gutters style="border-left: 1px solid black; border-right: 1px solid black">
                <v-col>
                    <v-card>
                        <v-data-table :headers="headers" :items="muestra">
                            <template v-slot:[`item.fechaRecoleccion`]="{ item }">
                                <span>{{ fecha(item.fechaRecoleccion) }}</span>
                            </template>
                        </v-data-table>
                    </v-card>
                </v-col>
            </v-row>
            <v-row no-gutters>
                <v-col cols="8" class="py-0 px-0" style="border-left: solid 1px black; border-top: solid 1px black">
                    <h5 class="primary text-center white--text px-0 py-0" style="width: 100%">
                        *Observaciones preestablecidas
                    </h5>
                </v-col>
                <v-col cols="4" class="py-0 px-0" style=" border-right: solid 1px black; border-top: solid 1px black">
                    <h5 class="primary text-center white--text px-0 py-0" style="width: 100%">
                        Condiciones del servicio
                    </h5>
                </v-col>
            </v-row>
            <v-row no-gutters>
                <v-col cols="1" class="px-0 py-0">
                    <p class="texto font-weight-black">1</p>
                    <p class="texto font-weight-black">2</p>
                    <p class="texto font-weight-black">3</p>
                    <p class="texto font-weight-black">4</p>
                    <p class="texto font-weight-black">5</p>
                    <p class="texto font-weight-black">6</p>
                    <p class="texto font-weight-black">7</p>
                </v-col>
                <v-col cols="6" class="px-0 py-0">
                    <p class="texto">Recipientes de recolección inadecuados.</p>
                    <p class="texto">Envase roto, abierto o agujereado.</p>
                    <p class="texto">Evidencias visibles de microrganismos.</p>
                    <p class="texto">Evidencias de fermentación.</p>
                    <p class="texto">Cantidad de muestra sea insuficiente.</p>
                    <p class="texto">
                        Falta de información o incongruencias en la identificación de los
                        recipientes.
                    </p>
                    <p class="texto">Otro (explique la situación presentada):</p>
                </v-col>
                <v-col cols="5" class="texto py-0 px-0">
                    <p class="servicio mb-0" style="font-size:10px">
                        El solicitante al firmar la presente acta de recepción de muestras
                        acepta lo siguiente: <br />
                        1. Que a las muestras se le realicen todos los ensayos de acuerdo al
                        ítem de la <br />
                        cotización indicado en el presente formato y los mismos sean
                        reportados en el <br />
                        respectivo informe de resultados. <br />
                        2. Que la totalidad de la información registrada a las muestras sea
                        reportada en el <br />
                        respectivo informe de resultados. <br />
                        3. Todas las observaciones y anexos descritos en el formato Oferta de
                        servicios CAT– <br />
                        ST–OC–F–002 correspondiente a la versión de la cotización aceptada.
                    </p>
                </v-col>
            </v-row>
            <v-row no-gutters class="my-0">
                <v-col cols="2" class="text-center px-0">
                    <p :style="{ background: color, color: 'white', border: 'solid 1px black' }"
                        class=" mb-0 pl-2 py-2">
                        Quien entrega</p>
                    <p :style="{ background: color, color: 'white', borderRight: 'solid 1px black', borderLeft: 'solid 1px black', borderBottom: 'solid 1px black' }"
                        class=" mb-0 pl-2 py-2">C.C.</p>
                    <p :style="{ background: color, color: 'white', borderRight: 'solid 1px black', borderLeft: 'solid 1px black', borderBottom: 'solid 1px black' }"
                        class=" mb-0 pl-2 py-2">Firma</p>
                </v-col>
                <v-col cols="5" class="px-0">
                    <p :style="{ color: 'white', borderTop: 'solid 1px black', borderBottom: 'solid 1px black' }"
                        class=" mb-0 pl-2 py-2">hola</p>
                    <p :style="{ color: 'white', borderBottom: 'solid 1px black' }" class=" mb-0 pl-2 py-2">hola</p>
                    <p :style="{ color: 'white', borderBottom: 'solid 1px black' }" class=" mb-0 pl-2 py-2">hola</p>
                </v-col>

                <v-col cols="3" class="text-center px-0">
                    <p :style="{ background: color, color: 'white', borderRight: 'solid 1px black', borderLeft: 'solid 1px black', borderBottom: 'solid 1px black' }"
                        class=" mb-0 pl-2 py-2">Fecha y hora</p>
                    <p :style="{ background: color, color: 'white', borderRight: 'solid 1px black', borderLeft: 'solid 1px black', borderBottom: 'solid 1px black' }"
                        class=" mb-0 pl-2 py-2">Quien recibe las muestras
                    </p>
                    <p :style="{ background: color, color: 'white', borderRight: 'solid 1px black', borderLeft: 'solid 1px black', borderBottom: 'solid 1px black' }"
                        class=" mb-0 pl-2 py-2">Firma</p>
                </v-col>
                <v-col cols="2" class="px-0">
                    <p :style="{ color: 'white', borderRight: 'solid 1px black', borderBottom: 'solid 1px black' }"
                        class=" mb-0 pl-2 py-2">hola</p>
                    <p :style="{ color: 'white', borderRight: 'solid 1px black', borderBottom: 'solid 1px black' }"
                        class=" mb-0 pl-2 py-2">hola</p>
                    <p :style="{ color: 'white', borderRight: 'solid 1px black', borderBottom: 'solid 1px black' }"
                        class=" mb-0 pl-2 py-2">hola</p>

                </v-col>
            </v-row>

        </v-col>
    </v-container>
</template>

<script>
import axios from 'axios'
export default {
    name: "pageFacturaMuestra",
    data: () => ({
        formato: "",
        color: "",
        person: {
            nombre: "ohkb",
            cc: "oiho",
            direccion: "ihiuh",
            ciudad: "oiho",
            departamento: "jnu",
            contacto: "kbkb",
            telefono: "huuig",
            correo: "iubigig",
            id: "ohig",
        },
        headers: [
            {
                text: "Código de Muestra",
                align: "start",
                sortable: false,
                value: "codMuestra",
            },
            { text: "Municipio de recolección", value: "munRecoleccion.departamento" },
            { text: "Dirección de toma de muestra", value: "direccionTomaMuestra" },
            { text: "Lugar de toma de muestra", value: "lugarTomaMuestra" },
            { text: "Muestra recolectada por", value: "muestraRecolectadaPor" },
            { text: "Procedimiento de muestreo", value: "procedimientoMuestreo" },
            { text: "Tipo de muestra", value: 'tipoMuestra.tipos' },
            { text: "Matriz de la muestra", value: "matrizMuestra" },
            { text: "Fecha y hora de recolección", value: "fechaRecoleccion" },
            { text: "Ítem de la cotización", value: "item" },
            { text: "Observaciones", value: "observaciones" }
        ],
        muestra: []
    }),
    methods: {
        traerCalidad() {
            this.color = this.$store.state.color
            axios
                .post("https://labficat.herokuapp.com/api/calidad/formato", {
                    nombre: "Recepción de Muestras",
                })
                .then((res) => {
                    this.formato = res.data.calidad;
                })
                .catch((err) => {
                    console.log(err);
                });
        },
        traerMuestra() {
            let dato = this.$store.state.facturaMuestra
            this.muestra.push(dato)
            console.log(this.muestra);
            this.person.nombre = this.muestra[0].solicitante.nombre;
            this.person.cc = this.muestra[0].solicitante.documento;
            this.person.direccion = this.muestra[0].solicitante.direccion;
            this.person.ciudad = this.muestra[0].solicitante.ciudad.Ciudad;
            this.person.departamento = this.muestra[0].solicitante.ciudad.departamento;
            this.person.telefono = this.muestra[0].solicitante.telefono;
            this.person.contacto = this.muestra[0].solicitante.contacto;
            this.person.correo = this.muestra[0].solicitante.correo;
        },
        fecha(r) {
            let fecha = r.split('T')[0].replace(/-/g, "/")
            return fecha;
        },
    },
    created() {
        this.traerCalidad();
        this.traerMuestra();
    }
}
</script>

<style scoped>
.justificar {
    text-align: center;
    justify-content: center;
}

.label {
    color: white;
    border: solid 1px black;
}

.field {
    max-height: 26px;
}

.logo {
    border-left: solid 1px black;
    border-bottom: solid 1px black;
    border-top: solid 1px black;
}

.centro {
    border-left: solid 1px black;
    border-right: solid 1px black;
    text-align: center;
    justify-content: center;
    margin: 0 0;
}

.formato {
    border-right: solid 1px black;
}

.solicitante {

    border-bottom: solid 1px black;
    border-left: solid 1px black;
    border-right: solid 1px black;
}

.prueba {
    border-left: solid 1px black;
    border-right: solid 1px black;
    border-top: solid 1px black;
}

.texto {
    font-size: 10px;
    border: 1px solid black;
    text-align: center;
    justify-content: center;
    margin: 0 0;
}
</style>